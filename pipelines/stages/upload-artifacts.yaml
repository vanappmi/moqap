---
include:
  - project: "moqap/modules"
    ref: "3.3.6"
    file:
      - "/artifactory/upload_artifacts_dir.yml"

Upload Artifacts STAGE:
  stage: upload
  extends: .Upload-Artifacts
  tags:
    - eks-dev
  only:
    - branches
  environment:
    name: ${DEPLOY_ENV}
  artifacts:
    paths:
      - artifacts/*
  dependencies:
    - Build Image STAGE
  needs:
    - job: Build Image STAGE
  variables:
    TARGET_PATH: "$DEV_DOCKER_REPO/$CI_PROJECT_NAMESPACE/$CI_PROJECT_NAME/$CI_COMMIT_REF_NAME/$CI_COMMIT_SHORT_SHA/$CI_ENVIRONMENT_SLUG/"
    ARTIFACTS_DIR: "artifacts"
    ARTIFACTORY_USER: $ARTIFACTORY_USER
    ARTIFACTORY_PASSWORD: $ARTIFACTORY_PASSWORD
